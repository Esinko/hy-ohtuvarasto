{% extends "base.html" %}

{% block title %}{{ warehouse.name }} - Warehouse Manager{% endblock %}

{% block content %}
<div class="hero">
    <h2>{{ warehouse.name }}</h2>
    <div class="hero-meta">
        <span>Capacity: {{ warehouse.tilavuus }}</span>
        <span>Used: {{ warehouse.saldo }}</span>
        <span>Space left: {{ "%.1f"|format(warehouse.get_space_left_percent()) }}%</span>
        <span>Items: {{ warehouse.get_item_count() }}</span>
    </div>
</div>

<h3>Items</h3>

{% if warehouse.items %}
    <ul class="item-list">
        {% for item_name, quantity in warehouse.items.items() %}
            <li class="item-row">
                <div class="item-info">
                    <span class="item-name">{{ item_name }}</span>
                    <span class="item-quantity">({{ quantity }})</span>
                </div>
                <div class="item-actions">
                    <form action="{{ url_for('remove_item', warehouse_id=warehouse_id, item_name=item_name) }}" method="post" class="remove-form">
                        <input type="number" name="quantity" placeholder="Qty" step="0.1" min="0.1" max="{{ quantity }}">
                        <button type="submit" class="btn btn-small btn-danger">Remove</button>
                    </form>
                </div>
            </li>
        {% endfor %}
    </ul>
{% else %}
    <div class="empty-state">
        <p>No items in this warehouse.</p>
        <p><a href="{{ url_for('add_item') }}" class="btn">Add an item</a></p>
    </div>
{% endif %}

<div class="actions">
    <a href="{{ url_for('add_item') }}" class="btn">Add Item</a>
    <a href="{{ url_for('edit_warehouse', warehouse_id=warehouse_id) }}" class="btn">Edit Warehouse</a>
    <form action="{{ url_for('delete_warehouse', warehouse_id=warehouse_id) }}" method="post" class="inline-form">
        <button type="submit" class="btn btn-danger" onclick="return confirm('Are you sure you want to delete this warehouse?')">Delete Warehouse</button>
    </form>
</div>
{% endblock %}
